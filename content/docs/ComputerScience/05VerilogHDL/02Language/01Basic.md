---
# -------------------------------------------------------------------------------------
# |                           核心元数据 (Core Metadata)                            |
# -------------------------------------------------------------------------------------
# 【必填】文章标题：清晰、吸引人，并包含核心关键词
title: "Verilog基础"
# 【必填】文章发布日期
date: 2025-10-20T17:18:49+08:00
# 【建议】文章最后修改日期：更新文章后，请手动更新此日期，以告知搜索引擎内容已更新
lastmod: 2025-10-20T17:18:49+08:00
# 【必填】文章作者：FixIt主题支持多种格式
# 格式一: 简单字符串
# author: "ApolloMonasa"
# 格式二: 包含链接和头像的复杂对象 (推荐)
# author:
#     - {name: "wmsnp", link: "https://github.com/wmsnp", avatar: "https://i.ooxx.ooo/i/ZGM0M.jpg"}
#     - ApolloMonasa
# 【必填】是否为草稿：发布前请务必设置为 false
draft: false
weight: 0

# -------------------------------------------------------------------------------------
# |                             SEO 与分享 (SEO & Sharing)                           |
# -------------------------------------------------------------------------------------
# 【核心SEO】文章描述：1-3句话，准确概括文章内容，包含关键词。会显示在搜索引擎结果中。
description: ""
# 【建议SEO】文章关键词：针对本文的特定关键词，用逗号分隔
keywords: []
# 【可选SEO】自定义URL：用于创建更简洁或更具描述性的URL，不设置则根据标题自动生成
# slug: "custom-url-slug-for-this-post"
# 【核心分享】社交分享预览图 (og:image)：非常重要！推荐尺寸 1200x630。
# 如果不设置，将使用 params.toml 中定义的全局 images。
# 将图片放在 /static/images/posts/ 目录下，然后在这里引用。
images: [] # 例如: ["/images/posts/my-post-banner.png"]

# -------------------------------------------------------------------------------------
# |                            内容组织 (Taxonomies)                               |
# -------------------------------------------------------------------------------------
# 【必填】标签：可以有多个，用于内容聚合
tags: [] # 例如: ["Minecraft", "教程"]
# 【必填】分类：通常只有一个，用于内容归档
categories: ["Docs"] # 例如: ["模组开发"]
# 【可选】系列：将多篇文章组织成一个系列，自动生成上一篇/下一篇链接
# series: [] # 例如: ["NeoForge 开发系列"]

# -------------------------------------------------------------------------------------
# |                         FixIt 主题特定配置 (Theme-Specific)                     |
# -------------------------------------------------------------------------------------
# 是否开启评论
comment: true
# 是否显示目录
toc: true
# 文章封面图：显示在文章列表和文章顶部
featuredImage: "" # 例如: "/images/posts/my-post-cover.jpg"
---

**摘要：**
这篇 Verilog 基础教程专门为你这样有 C 语言背景的开发者设计。我们将通过对比 C 语言，让你快速掌握 Verilog 的核心思想和语法。

<!--more-->

### 核心思想转变：从“执行指令”到“描述电路”

这是最关键的一步。

*   **C 语言是“串行”的**：代码从上到下，一步一步执行，像一份菜谱。
*   **Verilog 是“并行”的**：所有代码描述的电路在**同一时刻**都在工作，像一张电路蓝图。你不是在写程序，而是在**描述硬件长什么样**。

---

### 一、基本结构：模块 (Module)

在 C 语言中，基本单元是函数。在 Verilog 中，基本单元是 **模块 (`module`)**。一个模块就代表一个硬件元件，比如一个加法器、一个计数器。

| C 语言 (函数) | Verilog (模块) |
| :--- | :--- |
| `int add(int a, int b);` | `module adder (input a, input b, output sum);` |

**示例：**

```verilog
// 一个模块，代表一个与门
module and_gate (
    input  a,       // 输入端口a
    input  b,       // 输入端口b
    output out      // 输出端口out
);
    // 描述电路行为：out 始终等于 a 和 b 的与操作结果
    assign out = a & b;

endmodule // 模块结束
```

---

### 二、数据类型：线网 (wire) vs 寄存器 (reg)

这是 Verilog 的第一个难点。在 C 中，`int` 既能赋值也能被读取。在 Verilog 中，数据类型和其物理意义紧密相关。

1.  **`wire` (线网)**
    *   **物理意义**: 一根**物理电线**。
    *   **特点**: **不能存储值**，只能连接元件。它的值由驱动它的元件决定。
    *   **用法**: 必须用 `assign` 语句来驱动，用于描述**组合逻辑**。
    *   **C 语言类比**: 可以想象成一个等式的左边，`y = x + 1`，`y` 的值完全由 `x` 决定，`y` 自己没有记忆。

2.  **`reg` (寄存器)**
    *   **物理意义**: 一个**触发器**或**锁存器**。
    *   **特点**: **可以存储值**，像一个变量，会保持自己的值直到下一次被赋值。
    *   **用法**: 只能在 `always` 或 `initial` 块中被赋值，用于描述**时序逻辑**。
    *   **C 语言类比**: 就是一个普通的变量，`i = i + 1;`。

> **记忆法则**:
> *   `assign` 语句赋值的目标**必须是 `wire`**。
> *   `always` 块里赋值的目标**必须是 `reg`**。

---

### 三、逻辑描述：三种核心语法块

Verilog 主要通过三种方式来描述电路行为。

1.  **`assign` (连续赋值)**
    *   **作用**: 描述纯粹的组合逻辑。
    *   **特点**: 只要右边的值变化，左边立刻更新。它是一直“在线”的。
    *   **语法**: `assign output_wire = input1 & input2;`

2.  **`always` (过程块)**
    *   **作用**: 描述时序逻辑（带时钟）或复杂的组合逻辑。
    *   **特点**: 由一个“敏感列表”`@(...)`触发执行。
    *   **两种经典形式**:
        *   **组合逻辑**: `@(*)` 表示列表里任何信号变化都会触发。
            ```verilog
            // 描述一个多路选择器
            always @(*) begin
                if (sel == 1)
                    out = a;
                else
                    out = b;
            end
            ```
        *   **时序逻辑**: `@(posedge clk)` 表示仅在时钟 `clk` 的**上升沿**触发。这是所有同步电路的核心！
            ```verilog
            // 描述一个D触发器
            always @(posedge clk) begin
                q <= d; // 在时钟上升沿，d的值被锁存到q
            end
            ```

3.  **`initial` (初始块)**
    *   **作用**: 主要用于仿真测试（Testbench），提供初始激励。
    *   **特点**: 在仿真开始时**只执行一次**。
    *   **C 语言类比**: 非常像 C 语言的 `main()` 函数。

---

### 四、赋值操作符：`=` vs `<=` (最关键的区别)

这是 C 程序员最容易混淆的地方，但理解它就理解了 Verilog 的精髓。

1.  **`=` (阻塞赋值 Blocking Assignment)**
    *   **行为**: **立刻执行**。下一行代码必须等这一行执行完才能执行。和 C 语言的 `=` 完全一样。
    *   **用途**: 用于描述**组合逻辑** (`always @(*)` 块内)。

2.  **`<=` (非阻塞赋值 Non-Blocking Assignment)**
    *   **行为**: **“计划”执行**。`always` 块内所有 `<=` 的右边值会先被计算，然后在块结束时，所有左边的 `reg` **同时更新**。
    *   **用途**: 用于描述**时序逻辑** (`always @(posedge clk)` 块内)。

**一个经典例子：交换两个寄存器的值**

```verilog
always @(posedge clk) begin
    // 错误的方式 (用阻塞=)
    // a = b;   // a立刻变成b的值
    // b = a;   // b又变回了a的新值（也就是b的旧值），结果 a=b, b=b
    
    // 正确的方式 (用非阻塞<=)
    a <= b;  // 计划把b的值赋给a
    b <= a;  // 计划把a的(旧)值赋给b
    // 在时钟沿，a和b的值同时更新，实现交换
end
```

> **黄金法则**:
> *   在 `always @(posedge clk)` 里，**永远使用非阻塞赋值 `<=`**。
> *   在 `always @(*)` 里，**永远使用阻塞赋值 `=`**。
> *   在 `assign` 里，只能用 `=`。

---

### 快速参考：C vs Verilog 概念对比

| C 语言概念 | Verilog 等价/对应概念 | 说明 |
| :--- | :--- | :--- |
| 函数 `function()` | 模块 `module` | 基本的设计单元。 |
| 变量 `int`, `char` | `reg`, `wire`, `integer` | `wire` 是线，`reg` 是存储元件。 |
| 赋值 `=` | 阻塞 `=` / 非阻塞 `<=` | `=` 用于组合逻辑，`<=` 用于时序逻辑。 |
| `if`, `switch` | `if...else`, `case` | 语法相似，但用于描述电路结构。 |
| `for` 循环 | `for`, `generate for` | `for` 通常用于仿真，`generate for` 用于生成重复的硬件结构。 |
| 主函数 `main()` | **Testbench** (测试平台) | 一个顶层 `module`，用 `initial` 块来驱动和测试你的设计。 |
| 串行执行 | **并行执行** | Verilog 的核心思想。 |

这份指南覆盖了从 C 语言过渡到 Verilog 所需的最核心、最关键的知识点。抓住 **并行思想**、**`wire` vs `reg`** 以及 **`=` vs `<=`** 这三个要点，你的 Verilog 学习之路会非常顺畅。